<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle Solver - Complete GitHub Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 0.9em;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #667eea;
            font-weight: 600;
        }

        .guess-grid {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 30px;
        }

        .guess-row {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .letter-cell {
            width: 60px;
            height: 60px;
            border: 2px solid #d3d6da;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            font-weight: bold;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }

        .letter-cell:hover {
            transform: scale(1.05);
        }

        .letter-cell.empty {
            background: white;
            color: #333;
        }

        .letter-cell.absent {
            background: #787c7e;
            color: white;
            border-color: #787c7e;
        }

        .letter-cell.present {
            background: #c9b458;
            color: white;
            border-color: #c9b458;
        }

        .letter-cell.correct {
            background: #6aaa64;
            color: white;
            border-color: #6aaa64;
        }

        .input-section {
            margin-bottom: 20px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 600;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #d3d6da;
            border-radius: 8px;
            font-size: 1.1em;
            text-transform: uppercase;
            transition: border-color 0.2s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            flex: 1;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        .suggestions {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .suggestions h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .word-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .word-chip {
            background: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            color: #667eea;
            border: 2px solid #667eea;
            font-size: 0.9em;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #d3d6da;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.8em;
            color: #666;
            margin-top: 4px;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 12px;
            border-radius: 4px;
            margin-top: 15px;
            font-size: 0.9em;
            color: #1976d2;
        }

        .legend {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
        }

        .legend-box {
            width: 30px;
            height: 30px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Wordle Solver</h1>
        <p class="subtitle" id="subtitle">Loading complete word database from GitHub...</p>

        <div id="loadingMessage" class="loading">
            ‚è≥ Loading 12,000+ words from official Wordle lists...
        </div>

        <div id="mainContent" style="display: none;">
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-box" style="background: #6aaa64;"></div>
                    <span>Correct</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box" style="background: #c9b458;"></div>
                    <span>Present</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box" style="background: #787c7e;"></div>
                    <span>Absent</span>
                </div>
            </div>

            <div class="guess-grid" id="guessGrid"></div>

            <div class="input-section">
                <div class="input-group">
                    <label for="guessInput">Enter your guess:</label>
                    <input type="text" id="guessInput" maxlength="5" placeholder="CRANE">
                </div>
                <div class="button-group">
                    <button class="btn-primary" onclick="addGuess()">Add Guess</button>
                    <button class="btn-secondary" onclick="resetSolver()">Reset</button>
                </div>
            </div>

            <div class="suggestions" id="suggestions" style="display: none;">
                <h3>üí° Suggested Words (<span id="wordCount">0</span> possibilities)</h3>
                <div class="word-list" id="wordList"></div>
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="totalWords">0</div>
                        <div class="stat-label">Remaining</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="guessCount">0</div>
                        <div class="stat-label">Guesses</div>
                    </div>
                </div>
            </div>

            <div class="info-box">
                <strong>How to use:</strong> Enter your guess, click "Add Guess", then click each letter tile to mark it as correct (green), present (yellow), or absent (gray). The solver will suggest possible words based on your constraints.
            </div>
        </div>
    </div>

    <script>
        let WORD_LIST = [];
        let guesses = [];
        let currentWordList = [];

        // Load word lists from GitHub
        async function loadWordLists() {
            let answers = [];
            let allowedGuesses = [];
            
            try {
                // Load Wordle answers (~2,300 words) - PRIMARY LIST
                console.log('Loading Wordle answers...');
                const answersResponse = await fetch('https://gist.githubusercontent.com/cfreshman/a03ef2cba789d8cf00c08f767e0fad7b/raw/wordle-answers-alphabetical.txt');
                const answersText = await answersResponse.text();
                answers = answersText.trim().split('\n').map(w => w.trim().toLowerCase()).filter(w => w.length === 5);
                console.log(`‚úÖ Loaded ${answers.length} answer words`);
                
            } catch (error) {
                console.error('Failed to load answer words:', error);
                document.getElementById('loadingMessage').innerHTML = `
                    ‚ùå Failed to load word lists from GitHub.<br>
                    <small>Error: ${error.message}</small>
                `;
                return;
            }
            
            try {
                // Try to load allowed guesses (~10,500 words) - SECONDARY LIST
                console.log('Loading additional allowed guesses...');
                
                // Try multiple sources for the allowed guesses
                const guessURLs = [
                    'https://gist.githubusercontent.com/cfreshman/cdcdf777450c5b0e17fb/raw/wordle-allowed-guesses.txt',
                    'https://gist.githubusercontent.com/cfreshman/d5fb56f04e34a3c331803e3242857ba8/raw/wordle-nyt-allowed-guesses.txt',
                    'https://raw.githubusercontent.com/tabatkins/wordle-list/main/words'
                ];
                
                let loaded = false;
                for (const url of guessURLs) {
                    try {
                        const guessesResponse = await fetch(url);
                        if (guessesResponse.ok) {
                            const guessesText = await guessesResponse.text();
                            allowedGuesses = guessesText.trim().split('\n').map(w => w.trim().toLowerCase()).filter(w => w.length === 5);
                            console.log(`‚úÖ Loaded ${allowedGuesses.length} additional guess words from ${url}`);
                            loaded = true;
                            break;
                        }
                    } catch (e) {
                        console.log(`Failed to load from ${url}, trying next...`);
                    }
                }
                
                if (!loaded) {
                    console.warn('‚ö†Ô∏è Could not load additional guesses - using answers only');
                }
                
            } catch (error) {
                console.warn('Could not load additional guesses:', error);
            }
            
            // Combine both lists and remove duplicates
            WORD_LIST = [...new Set([...answers, ...allowedGuesses])].sort();
            currentWordList = [...WORD_LIST];
            
            console.log(`‚úÖ TOTAL: ${WORD_LIST.length.toLocaleString()} words loaded`);
            console.log(`‚úÖ "truly" included: ${WORD_LIST.includes('truly')}`);
            console.log(`‚úÖ "cruel" included: ${WORD_LIST.includes('cruel')}`);
            
            // Hide loading, show main content
            document.getElementById('loadingMessage').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('subtitle').innerHTML = `Complete database with <strong>${WORD_LIST.length.toLocaleString()} official Wordle words</strong> loaded from GitHub ‚Ä¢ Click tiles to cycle colors`;
        }

        function initializeGrid() {
            const grid = document.getElementById('guessGrid');
            grid.innerHTML = '';
            
            for (let i = 0; i < 6; i++) {
                const row = document.createElement('div');
                row.className = 'guess-row';
                row.id = `row-${i}`;
                
                for (let j = 0; j < 5; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'letter-cell empty';
                    cell.id = `cell-${i}-${j}`;
                    row.appendChild(cell);
                }
                
                grid.appendChild(row);
            }
        }

        function addGuess() {
            const input = document.getElementById('guessInput');
            const guess = input.value.toLowerCase().trim();
            
            if (guess.length !== 5) {
                alert('Please enter a 5-letter word');
                return;
            }
            
            if (guesses.length >= 6) {
                alert('Maximum 6 guesses reached');
                return;
            }
            
            guesses.push({
                word: guess,
                states: ['empty', 'empty', 'empty', 'empty', 'empty']
            });
            
            const rowIndex = guesses.length - 1;
            const row = document.getElementById(`row-${rowIndex}`);
            
            for (let i = 0; i < 5; i++) {
                const cell = document.getElementById(`cell-${rowIndex}-${i}`);
                cell.textContent = guess[i].toUpperCase();
                cell.onclick = () => cycleCellState(rowIndex, i);
            }
            
            input.value = '';
            document.getElementById('guessCount').textContent = guesses.length;
        }

        function cycleCellState(rowIndex, cellIndex) {
            const states = ['empty', 'absent', 'present', 'correct'];
            const currentState = guesses[rowIndex].states[cellIndex];
            const currentIndex = states.indexOf(currentState);
            const nextIndex = (currentIndex + 1) % states.length;
            const nextState = states[nextIndex];
            
            guesses[rowIndex].states[cellIndex] = nextState;
            
            const cell = document.getElementById(`cell-${rowIndex}-${cellIndex}`);
            cell.className = `letter-cell ${nextState}`;
            
            updateSuggestions();
        }

        function updateSuggestions() {
            currentWordList = WORD_LIST.filter(word => matchesConstraints(word));
            
            const suggestionsDiv = document.getElementById('suggestions');
            const wordList = document.getElementById('wordList');
            const wordCount = document.getElementById('wordCount');
            const totalWords = document.getElementById('totalWords');
            
            if (currentWordList.length === 0) {
                suggestionsDiv.style.display = 'block';
                wordList.innerHTML = '<p style="color: #666;">No matching words found. Check your letter colors!</p>';
                wordCount.textContent = '0';
                totalWords.textContent = '0';
                return;
            }
            
            suggestionsDiv.style.display = 'block';
            
            const topWords = currentWordList.slice(0, 20);
            wordList.innerHTML = topWords
                .map(word => `<span class="word-chip">${word.toUpperCase()}</span>`)
                .join('');
            
            wordCount.textContent = currentWordList.length;
            totalWords.textContent = currentWordList.length;
        }

        function matchesConstraints(word) {
            for (let guess of guesses) {
                if (!matchesGuess(word, guess)) {
                    return false;
                }
            }
            return true;
        }

        function matchesGuess(word, guess) {
            const guessWord = guess.word;
            const states = guess.states;
            
            for (let i = 0; i < 5; i++) {
                if (states[i] === 'correct') {
                    if (word[i] !== guessWord[i]) {
                        return false;
                    }
                }
            }
            
            for (let i = 0; i < 5; i++) {
                if (states[i] === 'present') {
                    if (word[i] === guessWord[i]) {
                        return false;
                    }
                    if (!word.includes(guessWord[i])) {
                        return false;
                    }
                }
            }
            
            for (let i = 0; i < 5; i++) {
                if (states[i] === 'absent') {
                    const letterIsCorrectOrPresent = states.some((s, idx) => 
                        (s === 'correct' || s === 'present') && guessWord[idx] === guessWord[i]
                    );
                    
                    if (!letterIsCorrectOrPresent && word.includes(guessWord[i])) {
                        return false;
                    }
                }
            }
            
            return true;
        }

        function resetSolver() {
            guesses = [];
            currentWordList = [...WORD_LIST];
            initializeGrid();
            document.getElementById('guessInput').value = '';
            document.getElementById('suggestions').style.display = 'none';
            document.getElementById('guessCount').textContent = '0';
        }

        // Initialize when page loads
        async function init() {
            await loadWordLists();
            initializeGrid();
            
            document.getElementById('guessInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    addGuess();
                }
            });
        }

        // Start the app
        init();
    </script>
</body>
</html>
